let basePath=window.location.pathname.includes("/pages/")?"../":"./";const loadComponents=(id,fileName,callback)=>{fetch(basePath+fileName).then((response=>{if(!response.ok)throw new Error(`Failed to load: ${fileName}`);return response.text()})).then((data=>{document.getElementById(id).innerHTML=data,callback&&callback()})).catch((err=>{console.error("Loading failed: "+fileName,err),document.getElementById(id).innerHTML=`<p>Error loading ${fileName}</p>`}))};document.addEventListener("DOMContentLoaded",(async()=>{await loadComponents("header","components/navbar.html",(()=>{highlightActiveLink(),setTimeout((()=>{window.innerWidth<992?(console.log("Loading mobile cart..."),loadComponents("mobileCartOffcanvas","pages/cart.html")):(console.log("Loading desktop cart..."),loadComponents("desktopCartOffcanvas","pages/cart.html"))}),100)})),await loadComponents("footer","components/footer.html")}));const highlightActiveLink=()=>{let currentPage=window.location.pathname.split("/").filter(Boolean).pop();document.querySelectorAll("nav ul li a").forEach((link=>{link.getAttribute("href").split("/").filter(Boolean).pop()===currentPage?link.classList.add("active"):link.classList.remove("active")}))};